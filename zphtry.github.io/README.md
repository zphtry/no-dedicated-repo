# Протокол TCP/IP или как работает Интернет простыми словами
![](https://pp.userapi.com/c841636/v841636501/5ac9/p4D6k7OWbgI.jpg)

## Общие принципы передачи данных

В основе работы глобальной сети Интернет лежит  набор (стек) протоколов **TCP/IP**.  
`TCP/IP` — это простой набор правил обмена информацией

Принципы работы интернет-протоколов `TCP/IP` напоминают работу почты.

Как работает обычная почта? Сначала вы пишете письмо, затем пишете адреса `отправителя` и `получателя`, а потом относите в почтовое отделение. Далее письмо проходит через цепочку почтовых отделений, пока не дойдёт до `получателя`. Когда `получатель` письма захочет вам ответить, то он в своем письме поменяет местами адреса `получателя` и `отправителя`, и письмо отправиться к вам по той же цепочке в обратном направлении.

На конверте письма будет написано примерно следующее:

```
Адрес отправителя:
От кого: Иванов Иван Иванович
Откуда: Ивантеевка, ул. Большая , д. 8, кв. 25

Адрес получателя:
Кому: Петров Петр Петрович
Куда: Москва, Усачевский переулок, д. 105, кв. 110
```
## Взаимодействие компьютеров и приложений в сети

Каждый компьютер в рамках сети Интернет имеет уникальный адрес, который называется `IP-адрес` (Internet Protocol Address), например: `195.34.32.116`. `IP-адрес` состоит из четырёх десятичных чисел (от 0 до 255), разделённых точкой. 

Знать только `IP-адрес` компьютера недостаточно. В конечном счёте обмениваются информацией не компьютеры, а приложения, работающие на них. На компьютере может одновременно работать сразу несколько приложений, которым требуется доступ в интернет (например почтовый сервер, веб-сервер  и пр.).

Для доставки обычного бумажного письма недостаточно знать только адрес дома — необходимо ещё знать номер квартиры. Также и каждое программное приложение имеет подобный номер, именуемый номером `порта`.

Большинство серверных приложений имеют стандартные номера, например: почтовый сервис привязан к `порту` с номером `25` (еще говорят: «слушает» `порт`, принимает на него сообщения), веб-сервис привязан к `порту` `80` и так далее.

Таким образом имеем почти полную аналогию с обычным почтовым адресом:
```
"адрес дома"     = "IP компьютера"
"номер квартиры" = "номер порта"
```
## Передача данных по сети
В компьютерных сетях, работающих по протоколам `TCP/IP`, аналогом бумажного письма в конверте является `пакет`, который содержит собственно `передаваемые данные` и `адресную информацию` — адрес отправителя и адрес получателя, например:
```
Адрес отправителя:
IP: 82.146.49.55
Port: 2049

Адрес получателя:
IP: 195.34.32.116
Port: 53

Данные пакета:
...
```

Комбинация `IP адрес` и номер `порта` - называется  **сокет**.

В нашем примере мы с `сокета` `82.146.49.55:2049` (`отправитель`) посылаем пакет на `сокет` `195.34.32.116:53` (`получатель`), т.е. пакет пойдет на компьютер, имеющий `IP-адрес` `195.34.32.116`, на порт `53`. Зная адрес `отправителя`, `получатель` сможет после обработки нашего запроса сформировать ответный `пакет`, который пойдет в обратном направлении на `сокет` `отправителя` `82.146.49.55:2049`.

Как правило взаимодействие осуществляется по схеме «клиент-сервер»: "клиент" запрашивает какую-либо информацию (например страницу сайта), сервер принимает запрос, обрабатывает его и посылает результат.

Большинство программ на домашнем компьютере являются клиентами — например почтовый клиент Outlook, веб-обозреватели IE, FireFox и пр. 

Повторение - мать учения:
* `IP-адрес` — это адрес компьютера (узла, хоста) в сети,
* `Порт` — номер конкретного приложения, работающего на этом компьютере.

## Как компьютеры узнают какой IP-адрес соответствует адресу, например, сайта?

Человеку запоминать цифровые `IP-адреса` трудно — куда удобнее работать с буквенными именами или точнее с **доменными именами**. Любой цифровой `IP-адрес` можно связать с  буквенно-цифровым именем. В результате например вместо `82.146.49.55` можно использовать имя www.ofnet.ru.  А преобразованием `доменного имени` в цифровой `IP-адрес` занимается **сервис доменных имен — DNS (Domain Name System)**.

Здесь стоит сказать о том, что такое **сервер**. `Сервер` — компьютер, специализирующийся на выполнении определённой функции. Например `веб-сервер` отдаёт `веб-страницы`, `почтовый сервер` занимается пересылкой сообщений, `DNS-сервер`, как можно догадаться, отдаёт `IP-адреса` запрошенных страниц.

`DNS-сервер` хранит таблицу, по которой он выполняет преобразование (`IP-адреса` придуманы):
![](https://pp.userapi.com/c841636/v841636501/59d3/flBrKU7pJrc.jpg)

Рассмотрим подробнее, как это работает. Ваш провайдер предоставляет вам `IP-адрес` `DNS-сервера`. На компьютере с этим `IP-адресом` работает приложение, которое знает все `доменные имена` в интернете и соответствующие им `IP-адреса`. `DNS-сервер` «слушает» `53-й` `порт`, принимает на него запросы и выдает ответы, например:

```
Запрос от нашего компьютера: "Какой IP адрес соответствует имени www.ofnet.ru?"
Ответ сервера: "82.146.49.55"
```
## Последовательность действий при запросе веб-страницы
Теперь рассмотрим, что происходит, когда в своем браузере вы набираете `доменное имя` сайта www.ofnet.ru и, нажимаете <enter>. Пусть предоставленный нам `IP-адрес` `DNS-сервера` это `195.34.32.116`:

1. Отправляется пакет с запросом `DNS-серверу` на `сокет` `195.34.32.116:53`.
```
IP адрес нашего компьютера: 91.76.65.216
Браузер: Internet Explorer (IE),
Страница, которую мы хотим открыть: www.ofnet.ru.
```
&nbsp;&nbsp;Как было рассмотрено выше, порт `53` соответствует `DNS-серверу`.

2. `DNS-сервер`, обработав наш запрос, возвращает `IP-адрес`, который соответствует введенному имени:
```
82.146.49.55
```
![](https://pp.userapi.com/c841636/v841636501/5aae/I22IW1JiXOQ.jpg)

3. Далее наш компьютер устанавливает соединение с портом `80` компьютера  `82.146.49.55` и посылает пакет с запросом на получение страницы www.ofnet.ru. `80-й` порт соответствует веб-серверу. 

4. Приняв от нас запрос, веб-сервер обрабатывает его и в нескольких пакетах посылает нам страницу в на языке **HTML** — языке разметки текста, который понимает браузер. `HTML`это просто веб-страница, в текстовом представлении.

5. Браузер, получив страницу, отображает ее. В результате мы видим на экране главную страницу этого сайта.

![](https://pp.userapi.com/c841636/v841636501/5ab9/BE8FG7Qa-1g.jpg)

## Специальные `IP-адреса` и `порты`

`IP адреса`:
* `127.0.0.1` — это `localhost`, адрес локальной системы, локальный адрес вашего компьютера.
* `0.0.0.0` - все IP-адреса.
* `192.168.xxx.xxx` — адреса, которые можно произвольно использовать в локальных сетях, в глобальной сети Интернет они не используются. Они уникальны только в рамках локальной сети. Адреса из этого диапазона вы можете использовать по своему усмотрению, например, для построения домашней или офисной сети.

`Порты`:
* `21` — порт FTP сервера.
* `25` — порт почтового SMTP сервера. Через него ваш почтовый клиент отправляет письма. IP адрес SMTP сервера и его порт (25-й) следует указать в настройках вашего почтового клиента.
* `110` — порт POP3 сервера. Через него ваш почтовый клиент забирает письма из вашего почтового ящика. IP адрес POP3 сервера и его порт (110-й) также следует указать в настройках вашего почтового клиента.
* `80` — порт WEB-сервера.
* `3128`, `8080` — прокси-серверы (настраиваются в параметрах браузера)

## Источник
Статья взята с [источник](http://www.ofnet.ru/osnovy-interneta/tcpip/)


he
